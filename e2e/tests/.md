**ผลการรัน Playwright Test**
- **Total:** 13  
- **Passed:** 6  
- **Failed:** 7  
---
## 1. วิเคราะห์ผลการทดสอบ
| Test Case | สถานะ | หมายเหตุ |
|-----------|--------|----------|
| 1. ปุ่ม Sign in ถูกปิดการใช้งานเมื่อฟอร์มว่างทั้งหมด | ✅ | ผ่าน |
| 2. แสดงข้อความ error เมื่ออีเมลไม่ถูกต้อง (ขณะกรอกรหัสผ่านถูกต้อง) | ❌ | ไม่พบ error message |
| 3. แสดงข้อความ error เมื่อรหัสผ่านไม่ถูกต้อง (ขณะกรอกรอีเมลถูกต้อง) | ❌ | ไม่พบ error message |
| 4. ปุ่ม Sign in ถูกปิดการใช้งานเมื่ออีเมลถูกต้องแต่รหัสผ่านผิด | ✅ | ผ่าน |
| 5. ปุ่ม Sign in ถูกปิดการใช้งานเมื่อรหัสผ่านถูกต้องแต่อีเมลผิด | ✅ | ผ่าน |
| 6. ปุ่ม Sign in เปิดใช้งานเมื่อกรอกอีเมลและรหัสผ่านถูกต้องทั้งหมด | ✅ | ผ่าน |
| 7. เข้าสู่ระบบสำเร็จเมื่อกรอกข้อมูลถูกต้องและกดปุ่ม Sign in | ✅ | ผ่าน |
| 8. แสดงข้อความ error ทั้งสองฟิลด์เมื่อกรอกอีเมลและรหัสผ่านผิดทั้งคู่ | ❌ | ไม่พบ error message ทั้งสองฟิลด์ |
| 9. สามารถกดปุ่มแสดง/ซ่อนรหัสผ่านได้ | ❌ | toggle ไม่เปลี่ยน type |
| 10. สามารถกดปุ่ม Forgot password ได้ | ✅ | ผ่าน |
| 11. สามารถเข้าสู่ระบบด้วย Google ได้ | ❌ | ไม่ trigger handleSocialLogin |
| 12. สามารถเข้าสู่ระบบด้วย GitHub ได้ | ❌ | ไม่ trigger handleSocialLogin |
| 13. สามารถเข้าสู่ระบบด้วย LinkedIn ได้ | ❌ | ไม่ trigger handleSocialLogin |
---
## 2. สรุปข้อผิดพลาดสำคัญ
### 2.1 Validation Error Message ไม่แสดง (3 เคส)
- **Test ที่ล้มเหลว:**  
  - แสดงข้อความ error เมื่ออีเมลไม่ถูกต้อง  
  - แสดงข้อความ error เมื่อรหัสผ่านไม่ถูกต้อง  
  - แสดงข้อความ error ทั้งสองฟิลด์เมื่อกรอกผิดทั้งคู่  
- **รายละเอียด:**  
  - ไม่พบ element `p.text-red-400.text-sm[role=\"alert\"]` ใน DOM ภายใน 5 วินาที  
  - จำนวน error message ที่คาดหวัง (2) ไม่ตรงกับที่พบ (0)  
- **สาเหตุที่เป็นไปได้:**  
  - Selector ไม่ตรงกับ DOM จริง  
  - Validation ไม่ถูก trigger (อาจต้องกด submit หรือ blur ก่อน)  
  - Error message render ช้ากว่า timeout  
  - เงื่อนไขการแสดง error ใน component ผิด logic
### 2.2 Toggle Show/Hide Password ไม่ทำงาน
- **Test ที่ล้มเหลว:**  
  - สามารถกดปุ่มแสดง/ซ่อนรหัสผ่านได้  
- **รายละเอียด:**  
  - หลังคลิกปุ่ม Show password, input `#password` ยังเป็น `type=\"password\"` ไม่เปลี่ยนเป็น `text`  
- **สาเหตุที่เป็นไปได้:**  
  - ปุ่ม toggle ไม่ได้เปลี่ยน state จริง  
  - Selector ปุ่มผิด หรือ event handler ไม่ทำงาน  
  - DOM ยังไม่ update ตอน assert
### 2.3 Social Login ไม่ trigger handleSocialLogin (Google, GitHub, LinkedIn)
- **Test ที่ล้มเหลว:**  
  - สามารถเข้าสู่ระบบด้วย Google/GitHub/LinkedIn ได้  
- **รายละเอียด:**  
  - รอค่า `socialLogin` เป็นชื่อ provider แต่ไม่ได้ค่า (ยังเป็น \"\")  
- **สาเหตุที่เป็นไปได้:**  
  - Mock function ไม่ถูกเรียก  
  - Event handler ไม่ถูก bind  
  - ปุ่ม social login ไม่ได้ trigger function  
  - อาจมีปัญหาเรื่อง async หรือ test isolation
---
## 3. คำแนะนำแนวทางการแก้ไขและ test case เพิ่มเติม
### 3.1 Validation Error Message
- **ตรวจสอบ selector:**  
  - ดู DOM จริงว่า error message ใช้ class และ role ตรงกับ selector หรือไม่  
  - อาจใช้ selector ที่ยืดหยุ่นขึ้น เช่น `[role=\"alert\"]` หรือหา text โดยตรง
- **Trigger validation:**  
  - ตรวจสอบว่า validation ทำงานเมื่อไร (onBlur, onChange, onSubmit)  
  - ใน test อาจต้อง `await page.click('button[type=\"submit\"]')` ก่อน assert
- **เพิ่ม timeout:**  
  - ใช้ `await expect(...).toBeVisible({ timeout: 10000 })` เผื่อ DOM update ช้า
- **เพิ่ม test case:**  
  - กรณี field ว่าง, กรณีกรอกผิด format, กรณีกรอกถูกแต่ submit ซ้ำ
### 3.2 Toggle Show/Hide Password
- **ตรวจสอบ logic:**  
  - ตรวจสอบว่า event handler ของปุ่ม toggle ทำงานจริง  
  - ตรวจสอบว่า state เปลี่ยนและ input type เปลี่ยน
- **ปรับ test:**  
  - ใส่ `await` หลังคลิก toggle  
  - ตรวจสอบ selector ปุ่ม toggle ว่าตรงกับ DOM จริงหรือไม่
- **เพิ่ม test case:**  
  - ทดสอบ toggle หลายรอบ (Show → Hide → Show)  
  - ทดสอบ accessibility (aria-label)
### 3.3 Social Login
- **ตรวจสอบ mock function:**  
  - ตรวจสอบว่า test mock หรือ spy function `handleSocialLogin` ถูกต้อง  
  - ตรวจสอบว่า event handler ถูก bind กับปุ่ม social login
- **ปรับ test:**  
  - อาจต้อง mock window.open หรือ redirect  
  - ตรวจสอบว่า test isolation ไม่ทำให้ state ค้าง
- **เพิ่ม test case:**  
  - ทดสอบกรณี login fail  
  - ทดสอบกรณี user cancel
---
## 4. สรุป
- ปัญหาหลักคือ selector ไม่ตรง, validation ไม่ trigger, และ event handler ไม่ทำงาน
- ควรตรวจสอบ DOM จริง, ปรับ selector, และตรวจสอบ logic/component
- เพิ่ม test case สำหรับ edge case และ accessibility
- ทบทวน mocking/stubbing ใน test สำหรับ social login
---